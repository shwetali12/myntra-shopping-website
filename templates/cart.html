{% extends 'base.html' %}
{% load static %}

{% block content %}

<div class="container" style="margin-top: 130px;">

    <table class="table">
        <thead>
            <tr>
                <th class="fs-3">Image</th>
                <th class="fs-3">Name</th>
                <th class="fs-3">Size</th>
                <th class="fs-3">Price</th>
                <th class="fs-3">Description</th>
                <th class="fs-3">Quantity</th>
                <th class="fs-3">Actions</th> <!-- Corrected "Action" to "Actions" -->
            </tr>
        </thead>
        <tbody>
            {% if not product %}
                <tr>
                    <td colspan="7"><h1 class="text-pink text-center">Cart is Empty </h1></td>
                </tr>
            {% else %}
                {% for i in product %}
                    <tr>
                        <td><img src="{{ i.product.image.url }}" alt="{{ i.product.name }}" style="height: 150px;"></td>
                        <td>{{ i.product.name }}</td>
                        <td>{{ i.product.size }}</td>
                        <td>RS: {{ i.product.price }} <span class="text-warning">(20% off)</span></td>
                        <td>{{ i.product.description }}</td>
                        <td>{{ i.quantity }}</td>
                        <td>
                            <form action="{% url 'remove_from_cart' i.id %}" method="POST">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-danger" aria-label="">Delete Product</button>
                            </form>
                            {% if user.is_authenticated %}
                                <form action="{% url 'place_order' i.product.id %}" method="POST">
                                    {% csrf_token %}
                                    <button type="submit" class="btn btn-primary mt-2">Order Now</button>
                                </form>
                            {% else %}
                                <a href="{% url 'login' %}" class="btn btn-primary mt-2">Login to Order</a>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            {% endif %}
        </tbody>
    </table>

    <hr>
    <h2>Total Price: {{ total_price }}</h2>

</div>

{% endblock %}
